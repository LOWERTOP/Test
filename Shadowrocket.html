<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadowrocket é…è‰²ä¸»é¢˜è®¾ç½®å¹³å°</title>
    <style>
        :root {
            /* æ ¸å¿ƒå˜é‡ï¼Œä¼šè¢«JSåŠ¨æ€è¦†ç›– */
            --NavigationBarColor: transparent; /* é€æ˜ä»¥æ˜¾ç¤ºç»ç’ƒæ•ˆæœ */
            --NavigationBarTextColor: #000000;
            --TableBackgroundColor: #F2F2F7;
            --TableCellBackgroundColor: #FFFFFF;
            --TextLabelTextColor: #000000;
            --DetailLabelTextColor: #8E8E93;
            --TabBarColor: transparent; /* é€æ˜ä»¥æ˜¾ç¤ºç»ç’ƒæ•ˆæœ */
            --TabBarSelectedColor: #007AFF;
            --TabBarUnselectedColor: #8E8E93;
            --ButtonIconColor: #007AFF;
            --TableSeparatorColor: #C6C6C8;
            --HeaderFooterTextColor: #6D6D72;
            
            /* iOS 26 æ¦‚å¿µå˜é‡ */
            --glass-blur: blur(25px);
            --glass-border: 1px solid rgba(255, 255, 255, 0.2);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            --nav-height: 94px; /* åŒ…å«çŠ¶æ€æ å’Œå¯¼èˆªæ  */
            --tab-height: 88px; /* åŒ…å«åº•éƒ¨å®‰å…¨åŒº */
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        body {
            margin: 0; padding: 0;
            background: radial-gradient(circle at top left, #a8c0ff, #3f2b96); /* æ›´ä¸°å¯Œçš„èƒŒæ™¯ä»¥å‡¸æ˜¾ç»ç’ƒæ„Ÿ */
            height: 100vh;
            display: flex;
            align-items: center; justify-content: center;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
            overflow: hidden; color: #333;
        }

        .workspace {
            display: grid;
            grid-template-columns: 360px 1fr; /* å·¦ä¾§å›ºå®šå®½åº¦ï¼Œå³ä¾§è‡ªé€‚åº” */
            gap: 40px;
            width: 95%; max-width: 1600px;
            height: 92vh;
        }

        /* === å·¦ä¾§ç¼–è¾‘å™¨ === */
        .editor-panel {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border-radius: 24px;
            border: var(--glass-border);
            box-shadow: var(--glass-shadow);
            padding: 20px;
            display: flex; flex-direction: column;
            color: white;
            overflow: hidden;
        }

        .editor-header h2 { margin: 0 0 15px 0; font-weight: 300; letter-spacing: 1px; text-align: center; }

        .controls {
            flex: 1;
            overflow-y: auto; padding-right: 5px;
            /* ç¾åŒ–æ»šåŠ¨æ¡ */
            scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.3) transparent;
        }
        .controls::-webkit-scrollbar { width: 6px; }
        .controls::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 3px; }

        .control-group {
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(0,0,0,0.15);
            padding: 8px 12px; border-radius: 10px; margin-bottom: 8px;
        }
        .control-label { font-size: 13px; font-weight: 500; }
        input[type="color"] {
            -webkit-appearance: none; border: 2px solid rgba(255,255,255,0.5);
            width: 28px; height: 28px; border-radius: 50%; padding: 0; cursor: pointer;
        }
        
        .actions {
            margin-top: 15px; display: flex; gap: 10px;
        }
        .btn {
            flex: 1; padding: 12px; border-radius: 12px; border: none; cursor: pointer;
            font-weight: 600; font-size: 14px; transition: 0.2s;
        }
        .btn-import { background: rgba(255,255,255,0.2); color: white; }
        .btn-export { background: #007aff; color: white; box-shadow: 0 4px 15px rgba(0,122,255,0.3); }
        .btn:hover { transform: translateY(-2px); }
        .btn:active { transform: translateY(0px); opacity: 0.8; }


        /* === å³ä¾§ iPhone æ¨¡å‹ === */
        .device-container { display: flex; justify-content: center; align-items: center; }
        .iphone-17 {
            width: 430px; /* Pro Max å®½åº¦ */
            height: 880px;
            background: #000; border-radius: 60px;
            position: relative;
            box-shadow: 0 0 0 4px #555, 0 0 0 8px #222, 0 30px 80px rgba(0,0,0,0.4);
            overflow: hidden; border: 3px solid #333;
        }
        .dynamic-island {
            position: absolute; top: 12px; left: 50%; transform: translateX(-50%);
            width: 126px; height: 37px; background: #000; border-radius: 20px; z-index: 100;
        }
        
        /* å±å¹•å†…å®¹ */
        .screen {
            width: 100%; height: 100%; background-color: var(--TableBackgroundColor);
            display: flex; flex-direction: column; overflow: hidden;
            color: var(--TextLabelTextColor);
        }

        /* iOS 26 ç»ç’ƒå¯¼èˆªæ  */
        .nav-bar {
            height: var(--nav-height);
            padding-top: 48px; /* é¿è®©çµåŠ¨å²› */
            padding-bottom: 12px; padding-left: 20px; padding-right: 20px;
            background-color: var(--NavigationBarColor);
            backdrop-filter: var(--glass-blur) saturate(180%);
            -webkit-backdrop-filter: var(--glass-blur) saturate(180%);
            border-bottom: 0.5px solid rgba(var(--TableSeparatorColor), 0.3);
            display: flex; justify-content: center; align-items: center;
            position: relative; z-index: 10; transition: 0.3s;
        }
        .nav-title { font-weight: 600; font-size: 18px; color: var(--NavigationBarTextColor); }
        .nav-left-icon, .nav-right-icon {
            position: absolute; bottom: 12px; font-size: 24px; color: var(--ButtonIconColor); cursor: pointer;
        }
        .nav-left-icon { left: 20px; } .nav-right-icon { right: 20px; }

        /* å†…å®¹æ»šåŠ¨åŒº */
        .content-scroll-area { flex: 1; overflow-y: auto; position: relative; scroll-behavior: smooth; }
        .content-padder { padding: 20px; }
        
        /* Tab å†…å®¹å®¹å™¨ (ç”¨äºåˆ‡æ¢æ˜¾ç¤º) */
        .tab-content-wrapper { display: none; animation: fadeIn 0.3s ease; }
        .tab-content-wrapper.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* é€šç”¨ç»„ä»¶æ ·å¼ */
        .section-header {
            color: var(--HeaderFooterTextColor); font-size: 13px; margin: 24px 0 8px 16px; text-transform: uppercase;
        }
        .table-group {
            background-color: var(--TableCellBackgroundColor); border-radius: 12px; overflow: hidden; margin-bottom: 20px;
        }
        .table-cell {
            display: flex; align-items: center; padding: 14px 16px; min-height: 50px;
            border-bottom: 0.5px solid var(--TableSeparatorColor);
            position: relative;
        }
        .table-cell:last-child { border-bottom: none; }
        .cell-icon-box {
            width: 30px; height: 30px; border-radius: 8px; margin-right: 14px; flex-shrink: 0;
            display: flex; align-items: center; justify-content: center; color: white; font-size: 16px;
        }
        .cell-main { flex: 1; display: flex; flex-direction: column; justify-content: center; overflow: hidden; }
        .cell-title { font-size: 17px; font-weight: 400; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }
        .cell-subtitle { font-size: 13px; color: var(--DetailLabelTextColor); margin-top: 2px; }
        .cell-accessory { color: var(--DetailLabelTextColor); font-size: 16px; display: flex; align-items: center; margin-left: 10px; }
        .info-icon { color: var(--ButtonIconColor); font-size: 22px; margin-left: 8px; }
        
        /* å¼€å…³æ§ä»¶ */
        .ios-switch {
            width: 51px; height: 31px; background: #E9E9EA; border-radius: 15.5px; position: relative; transition: 0.3s;
        }
        .ios-switch::after {
            content: ''; position: absolute; top: 2px; left: 2px; width: 27px; height: 27px; background: white; border-radius: 50%; box-shadow: 0 3px 8px rgba(0,0,0,0.15); transition: 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .ios-switch.on { background: var(--ButtonIconColor); }
        .ios-switch.on::after { transform: translateX(20px); }

        /* === iOS 26 æ¶²æ€ç»ç’ƒ Tab æ  === */
        .tab-bar {
            height: var(--tab-height);
            background-color: var(--TabBarColor);
            backdrop-filter: var(--glass-blur) saturate(180%);
            -webkit-backdrop-filter: var(--glass-blur) saturate(180%);
            border-top: 0.5px solid rgba(var(--TableSeparatorColor), 0.3);
            display: flex; justify-content: space-around; padding-top: 10px;
            position: relative; z-index: 100;
        }
        .tab-item {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            width: 64px; height: 50px; position: relative; cursor: pointer;
        }
        /* æ¶²æ€ç»ç’ƒèƒŒæ™¯ (é€‰ä¸­æ—¶æ˜¾ç¤º) */
        .tab-glass-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.15); /* åŸºç¡€é€æ˜åº•è‰² */
            border-radius: 25px; opacity: 0; transform: scale(0.8); transition: 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            /* æ ¸å¿ƒï¼šæ··åˆå½“å‰ä¸»é¢˜è‰²ï¼Œåˆ¶é€ æœ‰è‰²ç»ç’ƒæ„Ÿ */
            mix-blend-mode: overlay; 
            box-shadow: inset 0 0 15px rgba(255,255,255,0.2);
        }
        /* é€‰ä¸­çŠ¶æ€ */
        .tab-item.selected .tab-glass-bg {
            opacity: 1; transform: scale(1); background: var(--TabBarSelectedColor);
        }
        
        .tab-icon-box, .tab-label { position: relative; z-index: 2; transition: 0.3s; }
        .tab-icon-box { font-size: 26px; margin-bottom: 2px; color: var(--TabBarUnselectedColor); }
        .tab-label { font-size: 10px; font-weight: 500; color: var(--TabBarUnselectedColor); }

        .tab-item.selected .tab-icon-box, .tab-item.selected .tab-label {
            color: var(--TabBarSelectedColor); /* é€‰ä¸­æ–‡å­—é¢œè‰² */
        }
        /* é¦–é¡µå¤§å›¾æ ‡ç‰¹æ®Šå¤„ç† */
        #tab-home .tab-icon-box { font-size: 28px; }

        .home-indicator {
            position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%);
            width: 135px; height: 5px; background: rgba(100,100,100,0.4); border-radius: 3px;
        }
        
        /* ç‰¹å®šé¡µé¢æ ·å¼å¾®è°ƒ */
        .card-switch { padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        .chart-placeholder { height: 200px; background: rgba(var(--ButtonIconColor), 0.1); border-radius: 12px; display: flex; justify-content: center; align-items: center; color: var(--ButtonIconColor); font-weight: bold; }
    </style>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>
<body>

<div class="workspace">
    <div class="editor-panel">
        <div class="editor-header">
            <h2>é…è‰²å®šåˆ¶</h2>
        </div>
        <div class="controls" id="controlsContainer">
            </div>
        <div class="actions">
            <button class="btn btn-import" onclick="importConfigPopup()">ğŸ“„ è¯»å–é…ç½®</button>
            <button class="btn btn-export" onclick="exportAndCopy()">ğŸ”— ç”Ÿæˆå¹¶å¤åˆ¶é“¾æ¥</button>
        </div>
    </div>

    <div class="device-container">
        <div class="iphone-17">
            <div class="dynamic-island"></div>
            <div class="screen">
                <div class="nav-bar">
                    <div class="nav-left-icon" id="navLeftBtn"><ion-icon name="scan-outline"></ion-icon></div>
                    <div class="nav-title" id="navTitle">Shadowrocket</div>
                    <div class="nav-right-icon" id="navRightBtn"><ion-icon name="add-outline"></ion-icon></div>
                </div>

                <div class="content-scroll-area">
                    
                    <div id="content-home" class="tab-content-wrapper content-padder active">
                        <div class="table-group card-switch">
                            <div style="font-size: 18px; font-weight: 600;">US-DMIT-Reality</div>
                            <div class="ios-switch on"></div>
                        </div>
                        <div class="table-group">
                            <div class="table-cell">
                                <div class="cell-icon-box" style="background: #007aff;"><ion-icon name="globe-outline"></ion-icon></div>
                                <div class="cell-main"><div class="cell-title">å…¨å±€è·¯ç”±</div></div>
                                <div class="cell-accessory">é…ç½® <ion-icon name="chevron-forward"></ion-icon></div>
                            </div>
                            <div class="table-cell">
                                <div class="cell-icon-box" style="background: #34C759;"><ion-icon name="speedometer-outline"></ion-icon></div>
                                <div class="cell-main"><div class="cell-title">è¿é€šæ€§æµ‹è¯•</div></div>
                                <div class="info-icon"><ion-icon name="refresh-circle"></ion-icon></div>
                            </div>
                        </div>
                         <div style="display: flex; justify-content: flex-end; color: var(--DetailLabelTextColor); margin-bottom: 10px; gap: 15px; font-size: 20px;">
                            <ion-icon name="filter-circle-outline"></ion-icon>
                            <ion-icon name="swap-vertical-outline"></ion-icon>
                            <ion-icon name="ellipsis-horizontal-circle-outline"></ion-icon>
                        </div>
                        <div class="table-group">
                            <div class="table-cell">
                                <div class="cell-main"><div class="cell-title">æœ¬åœ°èŠ‚ç‚¹</div></div>
                                <div class="info-icon"><ion-icon name="information-circle-outline"></ion-icon></div>
                            </div>
                             <div class="table-cell">
                                <div class="cell-main"><div class="cell-title">ORC SS</div></div>
                                <div class="info-icon"><ion-icon name="information-circle-outline"></ion-icon></div>
                            </div>
                        </div>
                         <div class="table-group">
                             <div class="table-cell">
                                <div class="cell-main"><div class="cell-title">Yukihasu</div><div class="cell-subtitle">â†‘:0.1GB, â†“:3.12GB, TOT:100GB</div></div>
                                <div class="info-icon" style="margin-right: 10px; color: var(--DetailLabelTextColor);"><ion-icon name="refresh-outline"></ion-icon></div>
                                <div class="info-icon"><ion-icon name="information-circle-outline"></ion-icon></div>
                            </div>
                        </div>
                    </div>

                     <div id="content-config" class="tab-content-wrapper content-padder">
                         <div class="table-group">
                            <div class="table-cell">
                                <div class="cell-icon-box" style="background: transparent; color: var(--ButtonIconColor);"><ion-icon name="arrow-undo-outline" style="font-size:22px"></ion-icon></div>
                                <div class="cell-main"><div class="cell-title" style="color: var(--ButtonIconColor)">æ¢å¤é»˜è®¤é…ç½®</div></div>
                            </div>
                            <div class="table-cell">
                                <div class="cell-icon-box" style="background: transparent; color: var(--ButtonIconColor);"><ion-icon name="cloud-download-outline" style="font-size:22px"></ion-icon></div>
                                <div class="cell-main"><div class="cell-title" style="color: var(--ButtonIconColor)">å¯¼å…¥...</div></div>
                            </div>
                             <div class="table-cell">
                                <div class="cell-main"><div class="cell-title" style="color: var(--ButtonIconColor)">æµ‹è¯•è§„åˆ™</div></div>
                                <div class="cell-accessory"><ion-icon name="chevron-forward"></ion-icon></div>
                            </div>
                        </div>

                        <div class="section-header">æœ¬åœ°æ–‡ä»¶</div>
                        <div class="table-group">
                            <div class="table-cell">
                                <div style="width: 10px; height: 10px; background: orange; border-radius: 50%; margin-right: 10px;"></div>
                                <div class="cell-main">
                                    <div class="cell-title">LOWERTOP.conf</div>
                                    <div class="cell-subtitle">2025-12-02 12:18:35 - 69.6K</div>
                                </div>
                                <div class="info-icon" style="color: var(--ButtonIconColor)"><ion-icon name="checkmark-outline"></ion-icon></div>
                                <div class="info-icon"><ion-icon name="information-circle-outline"></ion-icon></div>
                            </div>
                            <div class="table-cell">
                                 <div style="width: 10px; margin-right: 10px;"></div>
                                <div class="cell-main">
                                    <div class="cell-title">default.conf</div>
                                    <div class="cell-subtitle">ä½¿ç”¨é»˜è®¤é…ç½®</div>
                                </div>
                                <div class="info-icon"><ion-icon name="information-circle-outline"></ion-icon></div>
                            </div>
                        </div>
                        <div class="section-header" style="text-transform: none; font-size: 12px;">åœ†ç‚¹ä»£è¡¨é»˜è®¤é…ç½®ï¼Œå¤é€‰æ ‡è®°ä»£è¡¨æ­£åœ¨ä½¿ç”¨çš„é…ç½®ã€‚</div>
                    </div>

                    <div id="content-data" class="tab-content-wrapper content-padder">
                        <div class="table-group" style="margin-top: 20px;">
                            <div class="table-cell">
                                <div class="cell-icon-box" style="background: transparent; color: #007aff;"><ion-icon name="logo-apple" style="font-size: 24px;"></ion-icon></div>
                                <div class="cell-main"><div class="cell-title">iCloud</div></div>
                                <div class="cell-accessory"><ion-icon name="chevron-forward"></ion-icon></div>
                            </div>
                        </div>
                        <div class="section-header">æ—¥å¿—</div>
                        <div class="table-group">
                            <div class="table-cell">
                                <div class="cell-main"><div class="cell-title">è‡ªåŠ¨åˆ é™¤</div></div>
                                <div class="cell-accessory">å¼€å¯ <ion-icon name="chevron-forward"></ion-icon></div>
                            </div>
                             <div class="table-cell">
                                <div class="cell-main"><div class="cell-title">ä»£ç†</div></div>
                                <div class="cell-accessory"><ion-icon name="chevron-forward"></ion-icon></div>
                            </div>
                        </div>
                        <div class="section-header">æœåŠ¡å™¨èŠ‚ç‚¹</div>
                        <div class="table-group">
                            <div class="table-cell">
                                <div class="cell-icon-box" style="background: transparent; color: var(--ButtonIconColor);"><ion-icon name="copy-outline" style="font-size:22px"></ion-icon></div>
                                <div class="cell-main"><div class="cell-title">è¦†ç›–èŠ‚ç‚¹</div></div>
                                <div class="cell-accessory">å¼€å¯ <ion-icon name="chevron-forward"></ion-icon></div>
                            </div>
                            <div class="table-cell">
                                <div class="cell-icon-box" style="background: transparent; color: var(--ButtonIconColor);"><ion-icon name="trash-outline" style="font-size:22px"></ion-icon></div>
                                <div class="cell-main"><div class="cell-title" style="color: #FF3B30;">åˆ é™¤æ‰€æœ‰èŠ‚ç‚¹</div></div>
                            </div>
                        </div>
                         <div class="section-header">ç»Ÿè®¡</div>
                         <div class="chart-placeholder">ç»Ÿè®¡å›¾è¡¨åŒºåŸŸ</div>
                    </div>

                    <div id="content-settings" class="tab-content-wrapper content-padder">
                        <div class="table-group" style="margin-top: 20px;">
                            <div class="table-cell">
                                <div class="cell-icon-box" style="background: #007aff;"><ion-icon name="language-outline"></ion-icon></div>
                                <div class="cell-main"><div class="cell-title">è¯­è¨€</div></div>
                                <div class="cell-accessory">ä¸­æ–‡ç®€ä½“ <ion-icon name="chevron-forward"></ion-icon></div>
                            </div>
                        </div>
                        <div class="section-header">é«˜çº§</div>
                        <div class="table-group">
                            <div class="table-cell">
                                <div class="cell-icon-box" style="background: transparent; color: #007aff;"><ion-icon name="flag-outline" style="font-size: 22px;"></ion-icon></div>
                                <div class="cell-main"><div class="cell-title">å»¶è¿Ÿæµ‹è¯•æ–¹æ³•</div></div>
                                <div class="cell-accessory">CONNECT <ion-icon name="chevron-forward"></ion-icon></div>
                            </div>
                            <div class="table-cell">
                                <div class="cell-icon-box" style="background: transparent; color: #5856D6;"><ion-icon name="cube-outline" style="font-size: 22px;"></ion-icon></div>
                                <div class="cell-main"><div class="cell-title">å°ç»„ä»¶</div></div>
                                <div class="cell-accessory"><ion-icon name="chevron-forward"></ion-icon></div>
                            </div>
                        </div>
                        <div class="section-header">éš§é“</div>
                        <div class="table-group">
                             <div class="table-cell">
                                <div class="cell-icon-box" style="background: transparent; color: #007aff;"><ion-icon name="toggle-outline" style="font-size: 22px;transform: rotate(-90deg);"></ion-icon></div>
                                <div class="cell-main"><div class="cell-title">éš§é“</div></div>
                                <div class="cell-accessory"><ion-icon name="chevron-forward"></ion-icon></div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="tab-bar">
                    <div class="tab-item selected" id="tab-home" onclick="switchTab('home')">
                        <div class="tab-glass-bg"></div>
                        <div class="tab-icon-box"><ion-icon name="home"></ion-icon></div>
                        <div class="tab-label">é¦–é¡µ</div>
                    </div>
                    <div class="tab-item" id="tab-config" onclick="switchTab('config')">
                        <div class="tab-glass-bg"></div>
                        <div class="tab-icon-box"><ion-icon name="folder-open"></ion-icon></div>
                        <div class="tab-label">é…ç½®</div>
                    </div>
                    <div class="tab-item" id="tab-data" onclick="switchTab('data')">
                        <div class="tab-glass-bg"></div>
                        <div class="tab-icon-box"><ion-icon name="pulse"></ion-icon></div>
                        <div class="tab-label">æ•°æ®</div>
                    </div>
                    <div class="tab-item" id="tab-settings" onclick="switchTab('settings')">
                        <div class="tab-glass-bg"></div>
                        <div class="tab-icon-box"><ion-icon name="settings-sharp"></ion-icon></div>
                        <div class="tab-label">è®¾ç½®</div>
                    </div>
                </div>
                <div class="home-indicator"></div>
            </div>
        </div>
    </div>
</div>

<script>
    // ä¸­æ–‡ç¿»è¯‘æ˜ å°„å­—å…¸
    const colorTranslation = {
        "NavigationBarColor": "å¯¼èˆªæ èƒŒæ™¯è‰²",
        "NavigationBarTextColor": "å¯¼èˆªæ æ ‡é¢˜è‰²",
        "TabBarColor": "åº•éƒ¨æ ‡ç­¾æ èƒŒæ™¯",
        "TabBarSelectedColor": "åº•éƒ¨æ ‡ç­¾é€‰ä¸­è‰²",
        "TabBarUnselectedColor": "åº•éƒ¨æ ‡ç­¾æœªé€‰è‰²",
        "TableBackgroundColor": "åˆ—è¡¨èƒŒæ™¯åº•è‰²",
        "TableCellBackgroundColor": "å•å…ƒæ ¼èƒŒæ™¯è‰²",
        "TableSeparatorColor": "åˆ—è¡¨åˆ†å‰²çº¿è‰²",
        "TextLabelTextColor": "ä¸»è¦æ–‡å­—é¢œè‰²",
        "DetailLabelTextColor": "æ¬¡è¦æ–‡å­—é¢œè‰²",
        "HeaderFooterTextColor": "åˆ†ç»„æ ‡é¢˜é¢œè‰²",
        "ButtonIconColor": "æŒ‰é’®/å›¾æ ‡ä¸»é¢˜è‰²",
        "ButtonNormalColor": "å¼€å…³å…³é—­åº•è‰²",
        // ... å…¶ä»–ä¸å¤ªé‡è¦çš„å¯ä»¥æš‚ç¼ºï¼Œæˆ–è€…ç»§ç»­è¡¥å……
        "PingSuccessTextColor": "PingæˆåŠŸæ–‡å­—è‰²",
        "PingTimeoutTextColor": "Pingè¶…æ—¶æ–‡å­—è‰²"
    };

    // éœ€è¦æ˜¾ç¤ºçš„é¢œè‰²é”®å€¼åˆ—è¡¨
    const displayKeys = Object.keys(colorTranslation);
    let currentState = {}; // å­˜å‚¨å½“å‰çš„ Shadowrocket Hex å€¼ (#AARRGGBB)

    // åˆå§‹åŒ–æ§ä»¶
    const controlsContainer = document.getElementById('controlsContainer');
    displayKeys.forEach(key => {
        const div = document.createElement('div');
        div.className = 'control-group';
        // ä½¿ç”¨ä¸­æ–‡ç¿»è¯‘
        div.innerHTML = `<span class="control-label">${colorTranslation[key] || key}</span><input type="color" id="input-${key}">`;
        controlsContainer.appendChild(div);
        
        // ç»‘å®šäº‹ä»¶
        document.getElementById(`input-${key}`).addEventListener('input', (e) => {
            // Web Color Input æ˜¯ #RRGGBBï¼Œè½¬æˆ CSS çš„ #RRGGBB
            const cssHex = e.target.value; 
            updateTheme(key, cssHex);
            // å­˜å…¥çŠ¶æ€æ—¶ï¼Œé»˜è®¤ä¸ºä¸é€æ˜ #FFRRGGBB
            currentState[key] = '%23FF' + cssHex.substring(1).toUpperCase();
        });
    });

    // æ›´æ–°ä¸»é¢˜ CSS å˜é‡
    function updateTheme(key, cssHex) {
        document.documentElement.style.setProperty(`--${key}`, cssHex);
    }

    // Tab åˆ‡æ¢é€»è¾‘
    function switchTab(tabName) {
        // 1. æ›´æ–° Tab æ é€‰ä¸­çŠ¶æ€ (æ¿€æ´»æ¶²æ€ç»ç’ƒæ•ˆæœ)
        document.querySelectorAll('.tab-item').forEach(item => item.classList.remove('selected'));
        document.getElementById(`tab-${tabName}`).classList.add('selected');

        // 2. åˆ‡æ¢å†…å®¹åŒºåŸŸæ˜¾ç¤º
        document.querySelectorAll('.tab-content-wrapper').forEach(content => content.classList.remove('active'));
        document.getElementById(`content-${tabName}`).classList.add('active');

        // 3. æ›´æ–°å¯¼èˆªæ æ ‡é¢˜å’ŒæŒ‰é’®
        const navTitle = document.getElementById('navTitle');
        const leftBtn = document.getElementById('navLeftBtn');
        const rightBtn = document.getElementById('navRightBtn');
        
        switch(tabName) {
            case 'home':
                navTitle.textContent = 'Shadowrocket';
                leftBtn.innerHTML = '<ion-icon name="scan-outline"></ion-icon>';
                rightBtn.style.display = 'block'; rightBtn.innerHTML = '<ion-icon name="add-outline"></ion-icon>';
                break;
            case 'config':
                navTitle.textContent = 'é…ç½®';
                leftBtn.innerHTML = '<ion-icon name="scan-outline"></ion-icon>';
                rightBtn.style.display = 'block'; rightBtn.innerHTML = '<ion-icon name="add-outline"></ion-icon>';
                break;
            case 'data':
                navTitle.textContent = 'æ•°æ®';
                leftBtn.innerHTML = ''; // æ•°æ®é¡µå·¦ä¸Šè§’ä¸ºç©º
                rightBtn.style.display = 'none'; // æ•°æ®é¡µå³ä¸Šè§’ä¸ºç©º
                break;
            case 'settings':
                navTitle.textContent = 'è®¾ç½®';
                leftBtn.innerHTML = ''; // è®¾ç½®é¡µå·¦ä¸Šè§’ä¸ºç©º
                rightBtn.style.display = 'none'; // è®¾ç½®é¡µå³ä¸Šè§’ä¸ºç©º
                break;
        }
    }

    // è¾…åŠ©ï¼šShadowrocket Hex è½¬ CSS Hex (#AARRGGBB -> #RRGGBB) - ç®€åŒ–å¤„ç†ï¼Œå¿½ç•¥ alpha
    function srHexToCss(srHex) {
        if (!srHex || !srHex.startsWith('#') || srHex.length < 8) return '#000000';
        // æˆªå–å6ä½ RRGGBB
        return '#' + srHex.substring(srHex.length - 6);
    }

    // è¯»å–é…ç½® (å¼¹å‡ºæ¡†)
    function importConfigPopup() {
        const link = prompt("è¯·ç²˜è´´ Shadowrocket é…è‰²é“¾æ¥ (shadowrocket://color?...)");
        if (link) {
            try {
                const url = new URL(link.replace('shadowrocket://', 'http://'));
                url.searchParams.forEach((value, key) => {
                    if (displayKeys.includes(key)) {
                        // value æ˜¯ URL ç¼–ç çš„ Hexï¼Œå¦‚ %23FF0000
                        const decodedSrHex = decodeURIComponent(value); 
                        currentState[key] = value; // ä¿å­˜åŸå§‹å€¼
                        const cssHex = srHexToCss(decodedSrHex);
                        
                        // æ›´æ–° input æ˜¾ç¤ºå’Œ CSS å˜é‡
                        const input = document.getElementById(`input-${key}`);
                        if (input) input.value = cssHex;
                        updateTheme(key, cssHex);
                    }
                });
            } catch (e) {
                alert("é“¾æ¥æ ¼å¼é”™è¯¯ï¼Œè¯·æ£€æŸ¥åé‡è¯•ã€‚");
            }
        }
    }

    // å¯¼å‡ºå¹¶å¤åˆ¶
    function exportAndCopy() {
        let params = [];
        for (let key in currentState) {
            params.push(`${key}=${currentState[key]}`);
        }
        if (params.length === 0) { alert("å½“å‰æ²¡æœ‰é…ç½®ä»»ä½•é¢œè‰²"); return; }
        
        const finalUrl = "shadowrocket://color?" + params.join('&');
        
        // ä½¿ç”¨ Clipboard API
        navigator.clipboard.writeText(finalUrl).then(() => {
            alert("âœ… é“¾æ¥å·²ç”Ÿæˆå¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼\næ‚¨å¯ä»¥ç›´æ¥å» Shadowrocket å¯¼å…¥ã€‚");
        }, () => {
            alert("âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ï¼š\n" + finalUrl);
        });
    }

    // åŠ è½½é»˜è®¤è“è‰²ä¸»é¢˜
    window.onload = function() {
        const defaultLink = "shadowrocket://color?NavigationBarColor=%2300FFFFFF&NavigationBarTextColor=%23FFFFFF&TabBarColor=%2300FFFFFF&TabBarSelectedColor=%23007AFF&TabBarUnselectedColor=%238E8E93&TableBackgroundColor=%23F2F2F7&TableCellBackgroundColor=%23FFFFFF&TextLabelTextColor=%23000000&DetailLabelTextColor=%238E8E93&ButtonIconColor=%23007AFF&HeaderFooterTextColor=%236D6D72";
        // æ¨¡æ‹Ÿå¯¼å…¥è¿‡ç¨‹
        const url = new URL(defaultLink.replace('shadowrocket://', 'http://'));
        url.searchParams.forEach((value, key) => {
            if (displayKeys.includes(key)) {
                currentState[key] = value;
                const cssHex = srHexToCss(decodeURIComponent(value));
                const input = document.getElementById(`input-${key}`);
                if (input) input.value = cssHex;
                updateTheme(key, cssHex);
            }
        });
    };

</script>

</body>
</html>
