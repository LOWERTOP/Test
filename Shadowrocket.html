<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadowrocket Theme Designer - iOS 26</title>
    <style>
        :root {
            /* ÈªòËÆ§ÂÄºÔºå‰ºöË¢´JSË¶ÜÁõñ */
            --NavigationBarColor: transparent;
            --NavigationBarTextColor: #000;
            --TableBackgroundColor: #f2f2f7;
            --TableCellBackgroundColor: #fff;
            --TextLabelTextColor: #000;
            --DetailLabelTextColor: #888;
            --TabBarColor: #fff;
            --TabBarSelectedColor: #007aff;
            --TabBarUnselectedColor: #888;
            --font-main: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
        }

        * { box-sizing: border-box; outline: none; }

        body {
            margin: 0;
            padding: 0;
            background: radial-gradient(circle at 50% 10%, #2b32b2, #1488cc);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font-main);
            overflow: hidden;
            color: white;
        }

        /* Â∏ÉÂ±ÄÂÆπÂô® */
        .workspace {
            display: flex;
            gap: 50px;
            width: 90%;
            max-width: 1400px;
            height: 90vh;
        }

        /* Â∑¶‰æßÔºöÁºñËæëÂô® */
        .editor-panel {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 24px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .editor-header {
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 10px;
        }

        .editor-header h1 { font-size: 24px; margin: 0; font-weight: 200; letter-spacing: 1px; }
        .editor-header p { opacity: 0.6; font-size: 12px; margin-top: 5px; }

        .controls {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }

        .control-group {
            display: grid;
            grid-template-columns: 1fr 50px;
            gap: 10px;
            margin-bottom: 12px;
            align-items: center;
            background: rgba(0,0,0,0.2);
            padding: 8px 12px;
            border-radius: 12px;
        }

        .control-label { font-size: 12px; color: #ddd; font-family: monospace; }
        
        input[type="color"] {
            -webkit-appearance: none;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
            padding: 0;
            background: none;
        }
        
        input[type="range"] { width: 100%; }

        .actions {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-direction: column;
        }

        textarea {
            width: 100%;
            height: 80px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            color: #fff;
            border-radius: 12px;
            padding: 10px;
            font-size: 11px;
            resize: none;
        }

        .btn-row { display: flex; gap: 10px; }
        
        button {
            flex: 1;
            padding: 12px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
        }

        .btn-primary { background: #007aff; color: white; }
        .btn-secondary { background: rgba(255,255,255,0.1); color: white; }
        .btn-primary:hover { background: #0063d1; }
        .btn-secondary:hover { background: rgba(255,255,255,0.2); }

        /* Âè≥‰æßÔºöiPhone 17 Pro Max Ê®°ÊãüÂô® */
        .device-container {
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
        }

        .iphone-17 {
            width: 400px;
            height: 850px;
            background: #000;
            border-radius: 55px;
            position: relative;
            box-shadow: 
                0 0 0 2px #333,
                0 0 0 6px #1a1a1a,
                0 50px 100px rgba(0,0,0,0.5);
            overflow: hidden;
            border: 4px solid #444; /* Titanium Frame */
            transition: transform 0.3s;
        }

        .iphone-17:hover { transform: rotateY(-5deg) rotateX(5deg); }

        /* Dynamic Island */
        .dynamic-island {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 35px;
            background: #000;
            border-radius: 20px;
            z-index: 100;
        }

        /* Â±èÂπïÂÜÖÂÆπÂå∫Âüü */
        .screen {
            width: 100%;
            height: 100%;
            background-color: var(--TableBackgroundColor);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* iOS 26 Glass UI Components */
        
        /* Navigation Bar */
        .nav-bar {
            padding-top: 55px; /* Status bar area */
            padding-bottom: 10px;
            padding-left: 20px;
            padding-right: 20px;
            background-color: var(--NavigationBarColor);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .nav-title {
            color: var(--NavigationBarTextColor);
            font-weight: 700;
            font-size: 28px;
        }

        .nav-icon {
            color: var(--ButtonIconColor);
            font-size: 24px;
        }

        /* Content List */
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .status-card {
            background: linear-gradient(135deg, var(--ButtonIconColor), #8e2de2);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            color: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .status-card::after {
            content: '';
            position: absolute;
            top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 60%);
            pointer-events: none;
        }

        .section-header {
            color: var(--HeaderFooterTextColor);
            font-size: 13px;
            text-transform: uppercase;
            margin-bottom: 8px;
            margin-left: 10px;
            letter-spacing: 0.5px;
        }

        .table-group {
            background-color: var(--TableCellBackgroundColor);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.02);
        }

        .table-cell {
            display: flex;
            align-items: center;
            padding: 16px;
            border-bottom: 1px solid var(--TableSeparatorColor);
            cursor: pointer;
            transition: background 0.2s;
        }

        .table-cell:last-child { border-bottom: none; }
        .table-cell:active { background-color: var(--TableCellSelectedBackgroundColor); }

        .cell-icon {
            width: 30px;
            height: 30px;
            border-radius: 8px;
            background: var(--ButtonIconColor);
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }

        .cell-content { flex: 1; }
        
        .cell-title {
            color: var(--TextLabelTextColor);
            font-size: 16px;
            font-weight: 500;
        }
        
        .cell-detail {
            color: var(--DetailLabelTextColor);
            font-size: 12px;
            margin-top: 2px;
        }

        .ping-text {
            color: var(--PingSuccessTextColor);
            font-size: 12px;
            font-weight: 600;
        }

        .toggle-switch {
            width: 50px;
            height: 30px;
            background: var(--ButtonNormalColor);
            border-radius: 15px;
            position: relative;
            transition: 0.3s;
        }
        
        .toggle-switch.active { background: var(--ButtonIconColor); }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px; left: 2px;
            width: 26px; height: 26px;
            background: white;
            border-radius: 50%;
            transition: 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .toggle-switch.active::after { transform: translateX(20px); }

        /* Tab Bar */
        .tab-bar {
            height: 85px;
            background-color: var(--TabBarColor);
            border-top: 1px solid var(--TabBarBorderColor);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-around;
            padding-top: 15px;
            padding-bottom: 35px; /* Home indicator space */
        }

        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--TabBarUnselectedColor);
            font-size: 10px;
            gap: 5px;
        }

        .tab-item.selected { color: var(--TabBarSelectedColor); }
        .tab-icon { font-size: 24px; }

        /* Home Indicator */
        .home-indicator {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 130px;
            height: 5px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }

    </style>
</head>
<body>

<div class="workspace">
    <div class="editor-panel">
        <div class="editor-header">
            <h1>Shadowrocket ÈÖçËâ≤‰∏ªÈ¢òÂàõ‰ΩúÂπ≥Âè∞</h1>
            <p>Target: iPhone 17 Pro Max | OS: iOS 26 (Liquid Glass)</p>
        </div>
        
        <div class="controls" id="controlsContainer">
            </div>

        <div class="actions">
            <textarea id="configOutput" placeholder="Paste Shadowrocket Color URL here or copy from here..."></textarea>
            <div class="btn-row">
                <button class="btn-secondary" onclick="importConfig()">ËØªÂèñÈÖçËâ≤Âú∞ÂùÄ</button>
                <button class="btn-primary" onclick="exportConfig()">ÁîüÊàêÈÖçËâ≤Âú∞ÂùÄ</button>
            </div>
        </div>
    </div>

    <div class="device-container">
        <div class="iphone-17">
            <div class="dynamic-island"></div>
            <div class="screen">
                <div class="nav-bar">
                    <div class="nav-title">Shadowrocket</div>
                    <div class="nav-icon">Ôºã</div>
                </div>

                <div class="content-area">
                    
                    <div class="status-card">
                        <div style="font-size: 14px; opacity: 0.8">Not Connected</div>
                        <div style="font-size: 24px; font-weight: 700; margin-top: 5px;">Click to Connect</div>
                        <div class="toggle-switch" style="position: absolute; right: 20px; top: 25px; background: rgba(255,255,255,0.3);"></div>
                    </div>

                    <div class="section-header">Global Routing</div>
                    <div class="table-group">
                        <div class="table-cell">
                            <div class="cell-content">
                                <div class="cell-title">Config</div>
                                <div class="cell-detail">default.conf</div>
                            </div>
                            <div class="cell-detail" style="font-size: 16px;">‚Ä∫</div>
                        </div>
                        <div class="table-cell">
                            <div class="cell-content">
                                <div class="cell-title">Proxy</div>
                                <div class="cell-detail">Direct Connect</div>
                            </div>
                            <div class="cell-detail" style="font-size: 16px;">‚Ä∫</div>
                        </div>
                    </div>

                    <div class="section-header">Servers</div>
                    <div class="table-group">
                        <div class="table-cell">
                            <div class="cell-icon">üá∫üá∏</div>
                            <div class="cell-content">
                                <div class="cell-title">US - Los Angeles 01</div>
                                <div class="cell-detail">vmess ‚Ä¢ 23ms</div>
                            </div>
                            <div class="ping-text">23 ms</div>
                            <div style="margin-left: 10px; width: 20px; height: 20px; border-radius: 50%; border: 2px solid var(--ButtonIconColor);"></div>
                        </div>
                        <div class="table-cell" style="background-color: var(--TableCellSelectedBackgroundColor)">
                            <div class="cell-icon">üáØüáµ</div>
                            <div class="cell-content">
                                <div class="cell-title">JP - Tokyo Premium</div>
                                <div class="cell-detail">trojan ‚Ä¢ 45ms</div>
                            </div>
                            <div class="ping-text">45 ms</div>
                            <div style="margin-left: 10px; width: 20px; height: 20px; border-radius: 50%; background: var(--ButtonIconColor);"></div>
                        </div>
                         <div class="table-cell">
                            <div class="cell-icon">üá∏üá¨</div>
                            <div class="cell-content">
                                <div class="cell-title">SG - Singapore Direct</div>
                                <div class="cell-detail">ss ‚Ä¢ Timeout</div>
                            </div>
                            <div class="ping-text" style="color: var(--PingTimeoutTextColor)">Timeout</div>
                            <div style="margin-left: 10px; width: 20px; height: 20px; border-radius: 50%; border: 2px solid var(--DetailLabelTextColor);"></div>
                        </div>
                    </div>
                </div>

                <div class="tab-bar">
                    <div class="tab-item selected">
                        <div class="tab-icon">üè†</div>
                        <div>Home</div>
                    </div>
                    <div class="tab-item">
                        <div class="tab-icon">‚öôÔ∏è</div>
                        <div>Config</div>
                    </div>
                    <div class="tab-item">
                        <div class="tab-icon">üìä</div>
                        <div>Data</div>
                    </div>
                    <div class="tab-item">
                        <div class="tab-icon">üõ†</div>
                        <div>Settings</div>
                    </div>
                </div>
                
                <div class="home-indicator"></div>
            </div>
        </div>
    </div>
</div>

<script>
    // ÂÆö‰πâ Shadowrocket ÊîØÊåÅÁöÑÊâÄÊúâÈ¢úËâ≤ÈîÆÂÄº (Âü∫‰∫éÊèê‰æõÁöÑ URL)
    const colorKeys = [
        "NavigationBarColor",
        "NavigationBar2Color",
        "NavigationBarTextColor",
        "NavigationBar2TextColor",
        "TabBarColor",
        "TabBarBorderColor",
        "TabBarSelectedColor",
        "TabBarUnselectedColor",
        "TableBackgroundColor",
        "TableCellBackgroundColor",
        "TableCellSelectedBackgroundColor",
        "TableSeparatorColor",
        "TextFieldTextColor",
        "PlaceholderColor",
        "TextLabelTextColor",
        "DetailLabelTextColor",
        "TextLabelDeleteColor",
        "HeaderFooterTextColor",
        "SearchFieldBackgroundColor",
        "IndicatorColor",
        "ButtonIconColor",
        "ButtonNormalColor",
        "ButtonHighlightedColor",
        "ButtonDisabledColor",
        "PingSuccessTextColor",
        "PingTimeoutTextColor",
        "DefaultDotColor",
        "HUDBackgroundColor"
    ];

    // ÂΩìÂâçÈ¢úËâ≤Áä∂ÊÄÅ
    let currentState = {};

    // 1. ÂàùÂßãÂåñ - ÂàõÂª∫ËæìÂÖ•Êéß‰ª∂
    const controlsContainer = document.getElementById('controlsContainer');
    
    colorKeys.forEach(key => {
        const div = document.createElement('div');
        div.className = 'control-group';
        div.innerHTML = `
            <span class="control-label">${key}</span>
            <input type="color" id="input-${key}" oninput="updateColor('${key}', this.value)">
        `;
        controlsContainer.appendChild(div);
    });

    // 2. È¢úËâ≤ËΩ¨Êç¢Â∑•ÂÖ∑ÂáΩÊï∞
    
    // Shadowrocket Hex (#AARRGGBB) ËΩ¨ Web CSS (#RRGGBBAA)
    function srHexToCss(srHex) {
        if (!srHex || !srHex.startsWith('#')) return '#000000';
        const hex = srHex.replace('#', '');
        if (hex.length === 8) {
            const alpha = hex.substring(0, 2);
            const rgb = hex.substring(2);
            return `#${rgb}${alpha}`;
        }
        return srHex;
    }

    // Web CSS (#RRGGBB) ËΩ¨ Shadowrocket Hex (#FFRRGGBB) - ÈªòËÆ§ÂÖ®‰∏çÈÄèÊòé
    // Â¶ÇÊûúÊòØ #RRGGBBAA ÂàôËΩ¨‰∏∫ #AARRGGBB
    function cssToSrHex(cssHex) {
        let hex = cssHex.replace('#', '');
        if (hex.length === 6) {
            return `%23FF${hex}`.toUpperCase(); // ÈªòËÆ§‰∏çÈÄèÊòé
        } else if (hex.length === 8) {
            const rgb = hex.substring(0, 6);
            const alpha = hex.substring(6, 8);
            return `%23${alpha}${rgb}`.toUpperCase();
        }
        return `%23FF000000`;
    }

    // Web CSS (#RRGGBBAA) ËΩ¨ Input Value (#RRGGBB) (HTML Color Input ‰∏çÊîØÊåÅ Alpha)
    function cssToInput(cssHex) {
        if (!cssHex) return '#000000';
        return cssHex.substring(0, 7);
    }

    // 3. Ê†∏ÂøÉÈÄªËæë

    function updateColor(key, value) {
        // Êõ¥Êñ∞ CSS ÂèòÈáè
        document.documentElement.style.setProperty(`--${key}`, value);
        
        // Êõ¥Êñ∞Áä∂ÊÄÅ (‰øùÂ≠ò‰∏∫ Web Ê†ºÂºè‰ª•‰æø‰∫éÂ§ÑÁêÜÔºåÂØºÂá∫Êó∂ÂÜçËΩ¨Êç¢)
        // Ê≥®ÊÑèÔºöHTML color input Âè™ËÉΩÈÄâ RGBÔºåÊ≤°Êúâ Alpha„ÄÇ‰∏∫‰∫ÜÁÆÄÂåñÔºåËøôÈáåÈªòËÆ§ Alpha ‰∏∫ FF„ÄÇ
        // ÂÆûÈôÖ Shadowrocket ÂÖÅËÆ∏ÈÄèÊòéÂ∫¶Ôºå‰ΩÜÂú®ÁÆÄÂçïÁöÑ Web Picker ‰∏≠ÂæàÈöæÂÅö„ÄÇ
        // Êàë‰ª¨ÂÅáËÆæÁî®Êà∑Âú®ÁΩëÈ°µÈÄâÊã©ÁöÑÈ¢úËâ≤ÈÉΩÊòØ‰∏çÈÄèÊòéÁöÑÔºåÈô§ÈùûÂØºÂÖ•Â∏¶ÈÄèÊòéÂ∫¶ÁöÑ„ÄÇ
        currentState[key] = value + "FF"; 
    }

    // ÂØºÂÖ•ÈÖçÁΩÆ
    function importConfig() {
        const inputStr = document.getElementById('configOutput').value;
        if (!inputStr.includes('shadowrocket://color')) {
            alert('Êó†ÊïàÁöÑ Shadowrocket ÈÖçËâ≤ÈìæÊé•');
            return;
        }

        // ÁÆÄÂçïÁöÑËß£ÊûêÈÄªËæë
        const queryString = inputStr.split('?')[1];
        if (!queryString) return;

        const params = new URLSearchParams(queryString);
        
        params.forEach((value, key) => {
            if (colorKeys.includes(key)) {
                // value Ê†ºÂºèÈÄöÂ∏∏ÊòØ %23AARRGGBB (URL encoded #)
                let decodedValue = decodeURIComponent(value); // #AARRGGBB
                let cssColor = srHexToCss(decodedValue); // #RRGGBBAA

                // Êõ¥Êñ∞ CSS ÂèòÈáè
                document.documentElement.style.setProperty(`--${key}`, cssColor);
                currentState[key] = cssColor;

                // Êõ¥Êñ∞ Input ÊòæÁ§∫ (ÂéªÊéâ Alpha)
                const inputEl = document.getElementById(`input-${key}`);
                if (inputEl) {
                    inputEl.value = cssToInput(cssColor);
                }
            }
        });
    }

    // ÂØºÂá∫ÈÖçÁΩÆ
    function exportConfig() {
        let baseUrl = "shadowrocket://color?";
        let params = [];
        
        colorKeys.forEach(key => {
            let val = currentState[key];
            if (val) {
                // Â∞ÜÂΩìÂâç Web È¢úËâ≤ËΩ¨Âõû Shadowrocket Ê†ºÂºè
                let srVal = cssToSrHex(val);
                params.push(`${key}=${srVal}`);
            }
        });
        
        params.push("v=1.0");
        const finalUrl = baseUrl + params.join('&');
        document.getElementById('configOutput').value = finalUrl;
        
        // Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÊèêÁ§∫
        navigator.clipboard.writeText(finalUrl).then(() => {
            alert("ÈÖçÁΩÆÈìæÊé•Â∑≤ÁîüÊàêÂπ∂Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ");
        });
    }

    // 4. Âä†ËΩΩÈªòËÆ§Á§∫‰æã
    window.onload = function() {
        const demoLink = "shadowrocket://color?NavigationBarColor=%2300FFFFFF&NavigationBar2Color=%2300FFFFFF&NavigationBarTextColor=%23ADBBC8&NavigationBar2TextColor=%232473BD&TabBarColor=%2300FFFFFF&TabBarBorderColor=%2300000000&TabBarSelectedColor=%232473BD&TabBarUnselectedColor=%23ADBBC8&TableBackgroundColor=%23181E26&TableCellBackgroundColor=%23202935&TableCellSelectedBackgroundColor=%23181E26&TableSeparatorColor=%23181E26&TextFieldTextColor=%23ADBBC8&PlaceholderColor=%23ADBBC8&TextLabelTextColor=%23ADBBC8&DetailLabelTextColor=%234F6077&TextLabelDeleteColor=%232473BD&HeaderFooterTextColor=%234F6077&SearchFieldBackgroundColor=%23202935&IndicatorColor=%23ADBBC8&ButtonIconColor=%232473BD&ButtonNormalColor=%23ADBBC8&ButtonNormal2Color=%23ADBBC8&ButtonNormal3Color=%23ADBBC8&ButtonHighlightedColor=%23ADBBC8&ButtonHighlighted2Color=%23ADBBC8&ButtonHighlighted3Color=%23202935&ButtonDisabledColor=%23ADBBC8&ButtonDisabled2Color=%23ADBBC8&PingSuccessTextColor=%232473BD&PingTimeoutTextColor=%234F6077&DefaultDotColor=%232473BD&HUDBackgroundColor=%23202935&v=1.0";
        document.getElementById('configOutput').value = demoLink;
        importConfig();
    };

</script>

</body>
</html>
